---
title: "Installing the Densify Connector"
---

The user account that you use to install the connector requires permission to install and start services on the machine or VM, where the Densify Connector is installed.

To learn more watch the following video:

<iframe allowfullscreen="allowfullscreen" class="vidyard_iframe" frameborder="0" height="360" mozallowfullscreen="mozallowfullscreen" msallowfullscreen="msallowfullscreen" oallowfullscreen="oallowfullscreen" src="https://player.vimeo.com/video/301238060" webkitallowfullscreen="webkitallowfullscreen" width="640"></iframe>



If you encounter issues installing the Densify Connector, it is likely that you do not have the correct privileges. Right-clicking the Densify Connector executable and selecting "Run as administrator" to install with elevated privileges.

1. Double click the file to run the Densify Connector executable.
2. The welcome page is displayed with details of the data collection process.
3. Click Next to continue and follow the on-screen instructions.
4. The Installation Directory screen is displayed for you to select the installation location (by default `C:\Program Files\Densify Connector\`). Click Next to confirm and start the installation.
5. Click Finish to complete the install, start the Densify Connector service and to open the configuration screen.

<Note>
The scheduling component of the Densify Connector runs as a service.
</Note>



## Upgrading the Densify Connector

When you are upgrading, the process is the same as the installation with one exception. During an upgrade, the installer automatically uninstalls the previous version of the Densify Connector before installing the new version.

The upgrade process retains your connection settings and all audit files.

* When upgrading, the installer will use the same directory as the current Connector installation.

## Configuring the Densify Connector

Before you can run the Densify data collection, you need to complete the following steps:

* Create a connection for each vCenter--define the connection information along with, optionally its vROps manager connection information
* Enable data transfer--define your settings and enable data transfer of the collected data to your Densify instance.

Once the collected data is transferred, Densify analytics are run and you can review the Densify reports.

<Accordion title="Step 1: Creating Connections">
Once the Densify Connector is installed, you need to configure each vCenter Server connection and optionally its vROps manager connection.

With vROps, you can obtain a one-time collection of historical workload data plus a daily collection of workload data. In this way, you do not need to wait for days to acquire enough workload data to perform your analysis. The recommendations generated from vROps are also collected enabling you to compare them with the recommendations generated by Densify's analytics. To view this comparison, contact [Support@Densify.com](mailto:Support@Densify.com).

The general procedure is summarized by the figure below, from clicking on the New Connection, defining the connections, verifying the connections, performing a data collection and saving.

<Accordion title="Figure: New Connection Using vROps (corresponding to the steps below)">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000048.png)</Frame>
</Accordion>


For each vCenter:

1. Click on New Connection.
2. Select whether or not you wish to collect workload data through vROps, using the toggle at the top.
3. Define, verify and confirm your vCenter Server connection information:

<Accordion title="Figure: Create vCenter Server Connection (corresponding to the steps below)">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000049_294x138.png)</Frame>
</Accordion>
1. Enter the connection information:
<table>
<thead>
<tr>
<td>
<p>Setting</p>
</td>
<td>
<p>Description</p>
</td>
</tr>
</thead>
<tr>
<td>
<p><span class="mc-variable Document.VM1 variable">vCenter Server</span></p>
</td>
<td>
<p>Enter a <span class="mc-variable Document.VM5 variable">vCenter</span> name. </p>
</td>
</tr>
<tr>
<td>
<p>User Name</p>
</td>
<td>
<p>Enter the user name that has the required permissions to the specified <span class="mc-variable Document.VM5 variable">vCenter</span>. </p>
<p>The format of the user name can be entered as user@domain or the NTLM formatted domain\user. Contact your <span class="mc-variable Document.VM5 variable">vCenter</span> administrator for details of how to enter your user name.</p>
</td>
</tr>
<tr>
<td>
<p>Password</p>
</td>
<td>
<p>Enter the password for the user account, specified above. Store encrypted passwords using AES128 encryption.</p>
</td>
</tr>
<tr>
<td>
<p>Use secure connection to <span class="mc-variable Document.VM5 variable">vCenter</span> (HTTPS)</p>
</td>
<td>
<p>This option to use a secured connection (HTTPS) is enabled by default. This is the recommended setting.  </p>
</td>
</tr>
</table>
2. Click the Click to Verify vCenter Connection button to test your connection definition.
3. Confirm that the verification completed successfully. The Last Successful Verification timestamp is updated when the verification successfully completes.

If using the vCenter for resource metrics (i.e. second bullet selected in [Step 2](#Select)), review the vCenter Metric Availability settings to ensure they meet the Densify minimum requirements. If any Status is returns an ERROR, then the minimum requirements are not met and you must update the vCenter Server settings accordingly. Ideally, all settings should return the OK status, in order to obtain the best analytics with all of the workloads and no gaps in your data.

<Accordion title="Figure: vCenter Metric Availability All Settings Optimal">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000051_408x297.png)</Frame>
</Accordion>

4. If you selected vROps (i.e. first bullet selected in [Step 2](#Select)), define and verify your vROps server connection information.

<Accordion title="Figure: Define and Verify vROps Connection (corresponding to the steps below)">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000050_360x169.png)</Frame>
</Accordion>
1. Enter the connection information:

<table>
<thead>
<tr>
<td>
<p>Setting</p>
</td>
<td>
<p>Description</p>
</td>
</tr>
</thead>
<tr>
<td>
<p><span class="mc-variable Document.VM10 variable">vROps</span> Server </p>
</td>
<td>
<p>Specify the <span class="mc-variable Document.VM10 variable">vROps</span> server name, using a short name, IP address or fully qualified domain name.</p>
<p class="CiRBATableNote" data-mc-autonum="<b>Note: </b>"><span class="autonumber"><span><b>Note: </b></span></span>If using a fully qualified domain name, you must disable the <span class="mc-variable Document.VM10 variable">vROps</span> Tomcat web server launcher TLS extension, otherwise, a connection error will occur. See <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuidel">http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuidel</a> for details. </p>
</td>
</tr>
<tr>
<td>
<p>User Name, Password</p>
</td>
<td>
<p><a name="kanchor388"></a>This is the local user or domain user account with permission to log into <span class="mc-variable Document.VM10 variable">vROps</span>. This user account must have access to view all datacenters, required  for your analysis.</p>
<p>When entering the domain user account, specify \<<span class="CiRBAcharEmphasis">username</span>>@\<<span class="CiRBAcharEmphasis">domain</span>>@\<<span class="CiRBAcharEmphasis">authenticated source</span>>. e.g. <a class="__cf_email__" data-cfemail="a9c3cdc6cce9c0c7dd87cdccc7dac0cfd087cac6c4" href="/cdn-cgi/l/email-protection">[email protected]</a>@densify.  </p>
<p>Refer to  <madcap:conditionaltext data-mc-conditions="CiRBA.ScreenOnly"><a class="MCXref xref" href="../Data_Collection_for_VI3_Systems/Access_Permissions_for_a_vROps_Account">Access Permissions for a vROps Account</a></madcap:conditionaltext> for other options.</p>
</td>
</tr>
<tr>
<td>
<p>Historical Data Collection</p>
</td>
<td>
<p>Specify the workload data to request a one-time collection of historical data. The drop down calendar indicates the valid days from which you can choose. The default is 30 days, if available.</p>
<p class="CiRBATableNote" data-mc-autonum="<b>Note: </b>"><span class="autonumber"><span><b>Note: </b></span></span><span class="mc-variable Document.VM10 variable">vROps</span> historical data collection occurs only once after a new connection is saved. To collect additional historical <span class="mc-variable Document.VM10 variable">vROps</span> data for an existing Connector connection, you will need to delete and recreate the Connector connection to trigger the historical data collection process.</p>
</td>
</tr>
<tr>
<td>
<p>Enable vROPs token-based authentication</p>
</td>
<td>
<p>Enable this option to use token-based authentication.</p>
<p> </p>
</td>
</tr>
<tr>
<td>
<p>Use secure connection to <span class="mc-variable Document.VM5 variable">vCenter</span> (HTTPS)</p>
</td>
<td>
<p>This option to use a secured connection (HTTPS) is enabled by default. This is the recommended setting. </p>
</td>
</tr>
</table>
2. Click the Click to Verify vROps Connection button to test the connection definition.
3. Confirm that the verification completed successfully. The Last Successful Verification timestamp is updated when the verification successfully completes.

5. You can optionally use the Save Connection and Collect Data Now button to ensure that there is no error in the data collection. The Last Data Collection timestamp is updated when the collection successfully completes (using the time zone of the Densify Connector itself).
6. Click Save Connection to save the connection information. The connection is added to the Saved Connections list.
7. To remove any connection that you no longer wish to audit:

1. Select it within the Saved Connections list and click Delete Connection.
2. To exclude a selected connection from its scheduled data collection, select it within the Saved Connections list, and de-select the option Include this connection in scheduled Data Transfer, and click Save Connection.
</Accordion>

<Accordion title="">
In order to transfer the collected data to Densify, you must define the data transfer settings and enable data transfer.

1. Click Data Transfer Settings button to display the following dialog box.
2. Define your Densify site information.
<Accordion title="Figure: Data Transfer Settings Dialog Box">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000014_376x262.png)</Frame>
</Accordion>

<table>
<thead>
<tr>
<td>
<p>Setting</p>
</td>
<td>
<p>Description</p>
</td>
<td>
<p>Default</p>
</td>
</tr>
</thead>
<tr>
<td>
<p>Send audit data to my <span class="mc-variable Document.Company variable">Densify</span> site</p>
</td>
<td class="td_4">
<p>When enabled, audits (from both <span class="CiRBAcharStrong">Collect Data Now</span> and scheduled data collections) are transferred to your <span class="mc-variable Document.Densify variable">Densify</span> instance, via HTTP. Port 8086 is set for HTTP connections.</p>
<p>When disabled, audits (from both <span class="CiRBAcharStrong">Collect Data Now</span> and scheduled data collections) are not transferred. </p>
<p>These files will be transferred to <span class="mc-variable Document.Densify variable">Densify</span> after this option is enabled, on the next scheduled collection.</p>
</td>
<td>
<p>Enabled</p>
</td>
</tr>
<tr>
<td>
<p>Use Secure Connection</p>
</td>
<td>
<p>Specifies that the data transfer will be via HTTPS or SSL connection.</p>
<p>When disabled, the data is transferred via HTTP. </p>
</td>
<td>
<p>Enabled</p>
</td>
</tr>
<tr>
<td>
<p>Enable certificate validation</p>
</td>
<td>
<p>Specifies whether or not to bypass certificate validation. This option only applies when the above option <span class="CiRBAcharStrong">Use Secure Connection</span> is checked. By default, certificate validation is not performed</p>
<p>If you opt for the Connector to bypass certificate validation, you then delegate this job to the proxy server, when a secure connection for data transfer is used. When delegated, the proxy server is responsible for establishing secure communication to the <span class="mc-variable Document.Company variable">Densify</span> service, validating both the certificate as well as the connection to the Connector.</p>
</td>
<td>
<p>Disabled</p>
</td>
</tr>
<tr>
<td>
<p>Server</p>
</td>
<td>
<p>This is the server running <span class="mc-variable Document.Densify variable">Densify</span>. Specify the server to which you will upload your collected data. You do not need to specify HTTPS or the port number. Contact <span class="mc-variable Document.Support variable"><a class="__cf_email__" data-cfemail="fba88e8b8b94898fbbbf9e9588929d82d5989496" href="/cdn-cgi/l/email-protection">[email protected]</a></span> for the name of your <span class="mc-variable General.ProductName variable">Densify</span>server instance.</p>
</td>
<td>
<p>Server Name</p>
</td>
</tr>
<tr>
<td>
<p>User Name, Password</p>
</td>
<td>
<p>Specify the <span class="mc-variable Document.Densify variable">Densify</span> user account having RESTful Web API privileges. Contact <span class="mc-variable Document.Support variable"><a class="__cf_email__" data-cfemail="dd8ea8adadb2afa99d99b8b3aeb4bba4f3beb2b0" href="/cdn-cgi/l/email-protection">[email protected]</a></span> for the user name and password.</p>
</td>
<td>
<p>Password</p>
</td>
</tr>
</table>
3. Click Advanced... to define the port numbers, data collection start time, etc., as necessary. Click OK to save.
<table>
<thead>
<tr>
<td>
<p>Setting</p>
</td>
<td>
<p>Description</p>
</td>
<td>
<p>Default</p>
</td>
</tr>
</thead>
<tr>
<td>
<p>SSL instance port</p>
</td>
<td>
<p>Specify the port used for the HTTPS transfer. If different from the 443 default, you must first notify <span class="mc-variable Document.Support variable"><a class="__cf_email__" data-cfemail="affcdadfdfc0dddbefebcac1dcc6c9d681ccc0c2" href="/cdn-cgi/l/email-protection">[email protected]</a></span> of the change. </p>
</td>
<td>
<p>443</p>
</td>
</tr>
<tr>
<td>
<p>Service port </p>
</td>
<td>
<p>This is the port on which the scheduler service runs. </p>
<p class="CiRBATableNote" data-mc-autonum="<b>Note: </b>"><span class="autonumber"><span><b>Note: </b></span></span>Do not modify the service port unless instructed by <span class="mc-variable Document.Support variable"><a class="__cf_email__" data-cfemail="b0e3c5c0c0dfc2c4f0f4d5dec3d9d6c99ed3dfdd" href="/cdn-cgi/l/email-protection">[email protected]</a></span>.</p>
</td>
<td>
<p>6789</p>
</td>
</tr>
<tr>
<td>
<p>Number of days to keep audits</p>
</td>
<td>
<p>The audit files in the <code>repository</code> folder and <code>repository\sent</code> subfolder older than the specified value are automatically purged. A value of 0 means that the files are deleted immediately. </p>
<p>In general you do not need to change this value. For best practices, you may wish to keep a few days of data, to ensure that files have been sent. </p>
</td>
<td>
<p>10</p>
</td>
</tr>
<tr>
<td>
<p>Number of audits pending submission</p>
</td>
<td>
<p>The maximum number of audit files that are pending to be transferred to <span class="mc-variable Document.Densify variable">Densify</span> (i.e. in the <code>repository\pending</code> folder). This includes both scheduled and <span class="CiRBAcharStrong">Collect Data Now</span> audits, only when Data Transfer is off. </p>
<p>Once the limit is reached, the files from new audits are saved to the <code>repository</code> folder instead. When the Data Transfer is enabled, the files in the <code>repository\pending</code> folder are transferred to <span class="mc-variable Document.Densify variable">Densify</span> and moved to the <code>repository\sent</code> folder, on the next scheduled collection.</p>
<p>Note that in general you do not need to change this value.</p>
</td>
<td>
<p>10</p>
</td>
</tr>
<tr>
<td>
<p>Collection start (HH:mm)</p>
</td>
<td class="td_4">
<p>By default, all <span class="mc-variable Document.VM2 variable">VMware</span> audits are scheduled to begin at 12:05 am, daily. Starting just after midnight ensures that the workload history for the previous 24-hour period has been processed by the <span class="mc-variable Document.VM5 variable">vCenter</span>/<span class="mc-variable Document.VM10 variable">vROps</span> and will be collected by <span class="mc-variable Document.Densify variable">Densify</span>.</p>
<p>Specify the start time, in 24-hour format (HH:mm), using the time of <span class="mc-variable Document.Densify variable">Densify</span>. This is the time when the data collection will start every day. </p>
<p>The <span class="mc-variable Document.VM5 variable">vCenter</span> stores workload data in a 24-hour moving window. If Data Retention is set to 1 day only, you need to start your data collection as close to midnight as possible in order to get the full day (24 hrs) of data.</p>
<p>In general you do not need to change this value. If you need to adjust the start time due to time zone considerations, contact <span class="mc-variable Document.Support variable"><a class="__cf_email__" data-cfemail="b5e6c0c5c5dac7c1f5f1d0dbc6dcd3cc9bd6dad8" href="/cdn-cgi/l/email-protection">[email protected]</a></span> for details.</p>
</td>
<td>
<p>00:05</p>
</td>
</tr>
<tr>
<td>
<p><a name="Enable_real-time_monitoring_and_automation"></a>Enable real-time monitoring and automation</p>
</td>
<td>
<p>Use this option to disable  automation.</p>
<p>If disabled, action automation will not be performed through the <span class="mc-variable Document.Densify_exe variable">Densify Connector</span>. This includes Real-Time and Proactive Automation. </p>
<p>If enabled then see  <madcap:conditionaltext data-mc-conditions="CiRBA.ScreenOnly"><a class="MCXref xref" href="./Action_Automation_Overview">Action Automation Overview</a></madcap:conditionaltext>.</p>
<p>You must stop and restart your connector service, when you enable this setting. See <a class="RefToBookmarkNoPage MCXref xref xrefRefToBookmarkNoPage" href="#Restart_Services"><u>Restarting the Connector Service</u></a>. A restart is <u>not</u> required when you disable this setting.</p>
</td>
<td>
<p>Enabled</p>
</td>
</tr>
<tr>
<td>
<p>Internet Connection Settings</p>
</td>
<td>
<p>If a proxy server is required to access the internet, update this section accordingly.</p>
</td>
<td>
<p>Disabled.</p>
</td>
</tr>
</table>
4. Click the My connection requires a proxy server to access the internet button if a proxy server is necessary to access the internet.
<table>
<thead>
<tr>
<td>
<p>Setting</p>
</td>
<td>
<p>Description</p>
</td>
</tr>
</thead>
<tr>
<td>
<p>My connection requires a proxy server to access the internet</p>
</td>
<td>
<p>Enable this option if you need to use a proxy server to connect to the internet.</p>
</td>
</tr>
<tr>
<td>
<p>Proxy server</p>
</td>
<td>
<p>Specify the name of the proxy server to be used. </p>
</td>
</tr>
<tr>
<td>
<p>Proxy port</p>
</td>
<td>
<p>Specify the port to be used. The default is 8080.</p>
</td>
</tr>
<tr>
<td>
<p>My proxy server requires authentication</p>
</td>
<td>
<p>Enable this option if the proxy server needs to be authenticated. </p>
</td>
</tr>
<tr>
<td>
<p>User name and password</p>
</td>
<td>
<p>Specify the user name and password to be used to authenticate Densify.</p>
</td>
</tr>
</table>
5. In the Data Transfer Settings dialog box, click the Test Connection button to test your connection definition.
<Note>
If your trial or subscription has expired, a message will be added to the log files.
</Note>

6. Click OK to save your Data Transfer Settings.

Once this feature is enabled, automatic HTTPS uploads will occur immediately following each data collection, whether scheduled or performed through the Collect Data Now button.
</Accordion>

<Accordion title="Step 3: Launching Densify">
You can launch Densify to view the results of the control analytics of your data collection. The results are available usually the next day, depending on the configuration of your Densify Connector. For example, if you configured the Densify Connector to collect data at 00:05 (i.e. 12:05 AM), the Control Console and resulting reports will be available the next morning when you arrive to work. The exact time depends on the size of your environment.
</Accordion>

<Accordion title="">
If the Densify Connector cannot establish a connection to the Densify Server (i.e. during a maintenance window), it will retry up to 10 times waiting 10-minutes between each retry.

If after this time, the connection still cannot be established, then the collected data is put into the pending folder. When the Densify Connector is able to establish a connection, on the next scheduled audit, it will then upload the current audit data as well as any audits in the pending folder. No collected data will be lost.
</Accordion>


## Changing the vCenter Collection Configuration

If you make changes in your vCenter Server, such as changing the sampling interval or statistics level, then you should verify these settings through the Densify Connector:

1. Select your vCenter Connection from the list of Saved Connections and click Verify vCenter Connection.
2. Verify that the Status is still OK for all vCenter settings.
3. Click Save to save the changes.

## Configuring Action Automation

When you are using action automation there are additional utilities that must be installed and configured on the same machine as the connector. In addition to Microsoft® PowerShell and .NET Framework, you need to install and configure the VMware vSphere PowerCLI.

<Accordion title="Installing and Configuring the VMware vSphere PowerCLI">
1. Register an account with VMware and then download vSphere PowerCLI. Prior to installing or upgrading the PowerCLI version on your Densify Connector, please check [Densify Connector Compatibility](./Action_Automation_Appendix).
<Note>
Running a PowerCLI version that is incompatible with the Densify Connector may result in Action Automation failing to execute.
</Note>

2. Install and run the vSphere PowerCLI.

In some environments, depending on your security settings, you may encounter an error when trying to run the action automation scripts.

<Accordion title="Figure: VMware vSphere PowerCLI Error Message">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000024_330x150.png)</Frame>
</Accordion>


In this case it may be necessary to set the parameter, PowerCLI Execution Policy to "RemoteSigned":

1. On the machine that is hosting the connector, run PowerCLI as administrator.
2. In the PowerCLI command window execute the following command:
```
Set-ExecutionPolicy RemoteSigned
```


3. Confirm the change by selecting [Y] for the specified change only, and not [A] to change all parameters.
4. Close the PowerCLI window and relaunch it, to verify the changes have been made.
</Accordion>

<Accordion title="Verifying Connectivity">
Verify the connectivity between vSphere PowerCLI and the vCenters from which data is being collected.

1. On the machine, that is hosting the connector, run PowerCLI as administrator.
2. In the PowerCLI window execute the following command:
```
Connect-VIServer 
<name_of_vCenter>
```




For example: `Connect-VIServer VC65V.int.Densify.com`

If you are logged in as a domain user with access to the selected vCenter your connection should go through automatically. If you are not using an authenticated credential, you will be prompted to enter credentials that have access to the vCenter.

If you want to connect using a specific user account, then use the option "–user". For example:

```
Connect-VIServer VC65V.int.Densify.com –user jsmith
```


3. If you are connected, the command returns the name of the vCenter, connection port and your user name.
4. If you are still encountering issues, you may have proxy settings that are preventing connectivity. See VMware KB https://kb.vmware.com/kb/2011395.
</Accordion>

<Accordion title="">
When you change some of the connector's configuration settings you may need to restart the connector service.

1. On the machine, that is hosting the connector, open the Windows Service manager and restart the Densify Connector service. This is the same as stopping and then starting the service.
<Accordion title="Figure: Restart Densify Connector Service">
<Frame>![](/images/docs/WebHelp_Densify/Content/Resources/Images/Cirba_SaaS/03000127_431x312.png)</Frame>
</Accordion>

</Accordion>


## Reviewing Data Collection Files

If you need to review your data collection files, they are located in the `repository` subfolder of your Densify Connector installation.

During data collection (either scheduled or through the Collect Data Now button), the collected data is written to the `repository` folder. One file is created per vCenter Server, whether or not vROps is used.

With Data Transfer Settings defined and enabled, these files are transferred immediately to your Densify platform and moved to the `repository\sent` folder.

With Data Transfer Settings disabled, these files are moved to the `repository\pending` subfolder, pending to be transferred to your Densify platform. These files are transferred after you define and enable the Data Transfer Settings, on the next scheduled data collection. Once transferred, the files are moved to the `repository\sent` folder.

## Removing the Densify Connector

If necessary, you can remove the Densify Connector from your local system. The uninstall utility will remove all files but not the collected data nor the configuration.

1. From Windows Explorer, navigate to your install directory. For example, by default:
```
C:\Program Files\Densify Connector\
```


2. Double-click the uninstaller.
```
C:\Program Files\Densify Connector\Uninstall Densify Connector
```


3. The uninstall utility will indicate when it is complete.
4. To remove the collected data and configuration, delete the entire install directory. For example, by default, remove the following directory:
```
C:\Program Files\Densify Connector\
```




## SSL Certificate Management

When using SSL-enabled connections for data transfer, the Densify Connector validates the certificate each time a connection is initiated to your Densify instance. The Connector loads the required certificate from your Densify instance.

If the Densify Connector's certificate expires, it will re-load the certificate from Densify.

This certificate validation only applies to your Densify instance, and not to vCenter data collection. Currently, the Connector automatically accepts certificates from the vCenter Servers that it is auditing.
